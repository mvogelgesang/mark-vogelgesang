---
import PageWrapper from "../layouts/PageWrapper.astro";

// Use Astro.glob() to fetch all posts, and then sort them by date.
const posts = (await Astro.glob("./blog/**/*.{astro,md,mdx}")).sort(
  (a, b) =>
    new Date(b.frontmatter.pubDate).valueOf() -
    new Date(a.frontmatter.pubDate).valueOf()
);
---

<PageWrapper title="Home">
  <div class="col-12 col-8-md blog-posts">
    {
      posts.map((post) => (
        <>
          <div class="blog-post">
            <h2>
              <a
                class="blog-post-link"
                href={
                  post.frontmatter.externalUrl
                    ? post.frontmatter.externalUrl
                    : post.url
                }
              >
                {post.frontmatter.title}
                {post.frontmatter.externalUrl ? (
                  <i
                    class="fa-solid fa-arrow-up-right-from-square fa-xs p-left-105"
                    style="margin-top: 0rem;"
                  />
                ) : (
                  ""
                )}
              </a>
            </h2>
            <p class="blog-post-content">{post.frontmatter.description}</p>
          </div>
        </>
      ))
    }
  </div>
</PageWrapper>
